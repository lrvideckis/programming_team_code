% a4 paper gives us over 2000 more square mm per page, for a total of
% almost 5/6 of a page extra space
\newif\ifuseletter

%\useletterfalse
\uselettertrue

% if you need extra room to staple, adjust textheight and topmargin.

\ifuseletter
\documentclass[12pt,letterpaper,twocolumn,landscape]{article}
\textheight 8.25in
\textwidth 10.75in
\evensidemargin -0.875in
\oddsidemargin -0.875in
\topmargin -0.875in
\else
\documentclass[12pt,a4paper,twocolumn]{article}
\textwidth 200mm  % a4 paper is 210mm wide
\textheight 287mm % a4 paper is 297mm high
\evensidemargin -1in
\oddsidemargin -1in
\topmargin -1in
\addtolength{\evensidemargin}{5mm}
\addtolength{\oddsidemargin}{5mm}
\addtolength{\topmargin}{5mm}
\fi

\headheight 15pt
\headsep 4pt
\addtolength{\textheight}{-14pt}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{caption}

\DeclareCaptionFormat{listing}{#3}
\captionsetup[lstlisting]{format=listing}

\pagestyle{fancy}
\fancyhf{}
\lhead{South Dakota School of Mines and Technology}
\rhead{Page \thepage}

\newlength{\lstlinewidth}
\setlength{\lstlinewidth}{0.5\textwidth}
\addtolength{\lstlinewidth}{-6pt}

% used to make sure that lstlisting aligns every character in a column
\newlength{\normalbasewidth}
\settowidth{\normalbasewidth}{\ttfamily m}
\newlength{\smallbasewidth}
\settowidth{\smallbasewidth}{\ttfamily\small m}
\newlength{\footnotebasewidth}
\settowidth{\footnotebasewidth}{\ttfamily\footnotesize m}
\newlength{\scriptbasewidth}
\settowidth{\scriptbasewidth}{\ttfamily\scriptsize m}

%% \makeatletter
%% \lstdefinestyle{mystyle}{
%%   basewidth=\footnotebasewidth,
%%   basicstyle=\ttfamily\lst@ifdisplaystyle\ttfamily\footnotesize\fi
%% }
%% \makeatother

\makeatletter
\lstdefinestyle{mystyle}{
	basewidth=\scriptbasewidth,
	basicstyle=\ttfamily\lst@ifdisplaystyle\ttfamily\scriptsize\fi
}
\makeatother

\makeatletter
\lst@CCPutMacro\lst@ProcessOther {"2D}{\lst@ttfamily{-{}}{-{}}}
\@empty\z@\@empty
\makeatother

% choose the colors you like below.

\lstset{
	language=C++,
	linewidth=\lstlinewidth,
	style=mystyle,           % set basic font and spacing
	captionpos=t,            % sets the caption position to top
	columns=fixed,
	mathescape=false,
	breaklines=true,         % sets automatic line breaking
	breakatwhitespace=true,  % automatic breaks should only happen at whitespace
	extendedchars=false,     % ASCII printing characters only
	% escapechar={`},          % Anything between backtics is escaped
	% escapeinside={{(*}{*)}},
	% frame=single,          % adds a frame around the code
	frame=tlrb,              % adds a frame around the code
	rulecolor=\color{black},
	xleftmargin=1pt,
	xrightmargin=1pt,
	% frameround=fttf,
	% framesep=3pt,
	% rulesep=3pt,
	framerule=0.5pt,
	% framexleftmargin=10pt,
	% framexrightmargin=10pt,
	% framextopmargin=10pt,
	% framexbottommargin=10pt,
	%%   %fillcolor=\color{SkyBlue},
	%%   %rulesepcolor=\color{SkyBlue},
	%keywordstyle=[1]\color{blue},      % keyword style
	%keywordstyle=[2]\color{cyan},      % keyword style
	%keywordstyle=[3]\color{orange},
	keywordstyle=\color{blue},      % keyword style
	stringstyle=\color{magenta},     % string literal style
	commentstyle=\color{gray}\itshape,
	morecomment=[l][\color{orange}]{\#},
	identifierstyle=\color{purple},
	%numberbychapter=true,
	numbers=none, % where to put the line-numbers; (none, left, right)
	%numbersep=15pt,                 % how far the line-numbers are from the code
	%numberstyle=\tiny\color{gray},  % the style that is used for the line-numbers
	postbreak={\mbox{$\hookrightarrow\space$}},
	showspaces=false, % show spaces everywhere adding particular underscores
	showstringspaces=false,         % underline spaces within strings only
	showtabs=false,  % show tabs within strings adding particular underscores
	stepnumber=1,    % the step between printed line-numbers.
	tabsize=4        % sets default tab character size to 8 spaces
}

\begin{document}

\lstlistoflistings
\newpage

\lstinputlisting[caption={\textbf{CONTEST}}, frame=none]{null}
\lstinputlisting[language=bash, caption={Hash codes}]{../library/contest/hash.sh}
\lstinputlisting[caption={Tips and Tricks}]{../library/contest/README.md}
\lstinputlisting[language=bash, caption={Template}]{../library/contest/template.cpp}
\lstinputlisting[language=bash, caption={Test on random inputs}]{../library/contest/test.sh}

\lstinputlisting[caption={\textbf{MAX FLOW}}, frame=none]{null}
\lstinputlisting[language=C++, caption={Dinic}]{../library/flow/dinic.hpp}
\lstinputlisting[language=C++, caption={Hungarian}]{../library/flow/hungarian.hpp}
\lstinputlisting[language=C++, caption={Min Cost Max Flow}]{../library/flow/min_cost_max_flow.hpp}

\lstinputlisting[caption={\textbf{GRAPHS}}, frame=none]{null}
\lstinputlisting[language=C++, caption={Block Vertex Tree}]{../library/graphs/block_vertex_tree.hpp}
\lstinputlisting[language=C++, caption={Bridge Tree}]{../library/graphs/bridge_tree.hpp}
\lstinputlisting[language=C++, caption={Bridges and Cuts}]{../library/graphs/bridges_and_cuts.hpp}
\lstinputlisting[language=C++, caption={Centroid Decomp}]{../library/graphs/centroid_decomp.hpp}
\lstinputlisting[language=C++, caption={Frequency Table of Tree Distance}]{../library/graphs/count_paths_per_length.hpp}
\lstinputlisting[language=C++, caption={Count Paths Per Node}]{../library/graphs/count_paths_per_node.hpp}
\lstinputlisting[language=C++, caption={Dijkstra}]{../library/graphs/dijkstra.hpp}
\lstinputlisting[language=C++, caption={HLD}]{../library/graphs/hld.hpp}
\lstinputlisting[language=C++, caption={Hopcroft Karp}]{../library/graphs/hopcroft_karp.hpp}
\lstinputlisting[language=C++, caption={Kth Node on Path}]{../library/graphs/kth_node_on_path.hpp}
\lstinputlisting[language=C++, caption={LCA}]{../library/graphs/lca.hpp}
\lstinputlisting[language=C++, caption={SCC}]{../library/graphs/scc.hpp}
\lstinputlisting[language=C++, caption={TREE ISOMORPHISM}]{../library/graphs/subtree_isomorphism_classification.hpp}

\lstinputlisting[caption={\textbf{MATH}}, frame=none]{null}
\lstinputlisting[language=C++, caption={Derangements}]{../library/math/derangements.hpp}
\lstinputlisting[language=C++, caption={BIN EXP MOD}]{../library/math/exp_mod.hpp}
\lstinputlisting[language=C++, caption={Fibonacci}]{../library/math/fib.hpp}
\lstinputlisting[language=C++, caption={Matrix Mult}]{../library/math/matrix_mult.hpp}
\lstinputlisting[language=C++, caption={Mobius Inversion}]{../library/math/mobius_inversion.hpp}
\lstinputlisting[language=C++, caption={N Choose K MOD}]{../library/math/n_choose_k_mod.hpp}
\lstinputlisting[language=C++, caption={Partitions}]{../library/math/partitions.hpp}
\lstinputlisting[language=C++, caption={Prime Sieve}]{../library/math/prime_sieve.hpp}
\lstinputlisting[language=C++, caption={Row Reduce}]{../library/math/row_reduce.hpp}
\lstinputlisting[language=C++, caption={Solve Linear Equations MOD}]{../library/math/solve_linear_mod.hpp}
\lstinputlisting[language=C++, caption={Euler's Totient Phi Function}]{../library/math/totient.hpp}

\lstinputlisting[caption={\textbf{MISC}}, frame=none]{null}

% monotonic stack related
\lstinputlisting[language=C++, caption={Cartesian Tree}]{../library/misc/monotonic_stack_related/cartesian_tree.hpp}
\lstinputlisting[language=C++, caption={Count Rectangles}]{../library/misc/monotonic_stack_related/count_rectangles.hpp}
\lstinputlisting[language=C++, caption={Max Rectangle in Histogram}]{../library/misc/monotonic_stack_related/max_rect_histogram.hpp}
\lstinputlisting[language=C++, caption={Monotonic Stack}]{../library/misc/monotonic_stack_related/monotonic_stack.hpp}

\lstinputlisting[language=C++, caption={Iterate Chooses}]{../library/misc/iterate_chooses.hpp}
\lstinputlisting[language=C++, caption={Iterate Submasks}]{../library/misc/iterate_submasks.hpp}
\lstinputlisting[language=C++, caption={Iterate Supermasks}]{../library/misc/iterate_supermasks.hpp}
\lstinputlisting[language=C++, caption={LIS}]{../library/misc/lis.hpp}
\lstinputlisting[language=C++, caption={Number of Distinct Subsequences DP}]{../library/misc/num_distinct_subsequences.hpp}
\lstinputlisting[language=C++, caption={PBDS}]{../library/misc/policy_based_data_structures.hpp}
\lstinputlisting[language=C++, caption={Random}]{../library/misc/random.hpp}
\lstinputlisting[language=C++, caption={Safe Hash}]{../library/misc/safe_hash.hpp}

\lstinputlisting[caption={\textbf{RANGE DATA STRUCTURES}}, frame=none]{null}

% uncommon
\lstinputlisting[language=C++, caption={Number Distinct Elements}]{../library/range_data_structures/uncommon/distinct_query.hpp}
\lstinputlisting[language=C++, caption={Implicit Lazy Segment Tree}]{../library/range_data_structures/uncommon/implicit_seg_tree.hpp}
\lstinputlisting[language=C++, caption={Kth Smallest}]{../library/range_data_structures/uncommon/kth_smallest.hpp}
\lstinputlisting[language=C++, caption={Merge Sort Tree}]{../library/range_data_structures/uncommon/merge_sort_tree.hpp}

\lstinputlisting[language=C++, caption={BIT}]{../library/range_data_structures/bit.hpp}
\lstinputlisting[language=C++, caption={RMQ}]{../library/range_data_structures/rmq.hpp}
\lstinputlisting[language=C++, caption={Lazy Segment Tree}]{../library/range_data_structures/seg_tree.hpp}

\lstinputlisting[caption={\textbf{STRINGS}}, frame=none]{null}
\lstinputlisting[language=C++, caption={Binary Trie}]{../library/strings/binary_trie.hpp}
\lstinputlisting[language=C++, caption={KMP}]{../library/strings/kmp.hpp}
\lstinputlisting[language=C++, caption={Longest Common Prefix Query}]{../library/strings/lcp_query.hpp}
\lstinputlisting[language=C++, caption={Palindrome Query}]{../library/strings/palindrome_query.hpp}
\lstinputlisting[language=C++, caption={Trie}]{../library/strings/trie.hpp}

% additional from AtCoder (AC-Library) import
\lstinputlisting[language=C++, caption={Suffix Array and LCP Array}]{../ac-library/atcoder/string.hpp}

\pagebreak
\end{document}